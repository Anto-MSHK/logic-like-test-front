# Voting System Frontend - Документация

Фронтенд-приложение для системы голосования за идеи развития продукта LogicLike. Реализовано в рамках тестового задания.

## Описание

Приложение позволяет пользователям:
- Просматривать список идей, отсортированный по количеству голосов
- Голосовать за идеи (до 10 голосов с одного IP-адреса)
- Видеть обновления голосов в реальном времени через WebSocket

## Технологический стек

- **React 19**
- **TypeScript**
- **Vite**
- **Socket.io-client**
- **CSS Modules**

## Установка и запуск

### Установка зависимостей

```bash
npm install
```

### Режим разработки

```bash
npm run dev
```

Приложение будет доступно по адресу `http://localhost:5173`

### Сборка для продакшена

```bash
npm run build
```

Собранные файлы будут в директории `dist/`

### Предпросмотр продакшен-сборки

```bash
npm run preview
```

## Переменные окружения

Создайте файл `.env` в корне проекта:

```env
VITE_API_BASE_URL=http://localhost:3000/api
VITE_SOCKET_URL=ws://localhost:3000
```

- `VITE_API_BASE_URL` - базовый URL для REST API (по умолчанию `/api`)
- `VITE_SOCKET_URL` - URL для WebSocket соединения (по умолчанию `ws://localhost:3000`)

## Основные компоненты

### Ideas_list
Главный контейнер приложения. Управляет:
- Загрузкой списка идей с сервера
- Подключением к WebSocket для получения обновлений
- Обработкой голосования
- Состояниями загрузки и ошибок

### IdeaCard
Карточка отдельной идеи с:
- Заголовком и описанием
- Счетчиком голосов
- Кнопкой голосования (скрывается если пользователь уже проголосовал)
- Индикатором процесса голосования

### ConnectionStatus
Индикатор состояния WebSocket соединения. Показывается только при потере соединения.

### LoadingSpinner
Универсальный индикатор загрузки с настраиваемым размером и сообщением.

### ErrorDisplay
Компонент для отображения ошибок с возможностью повторной попытки.

### ErrorBoundary
React Error Boundary для перехвата необработанных ошибок в дереве компонентов.

## API и взаимодействие с сервером

### REST API

**GET /api/ideas**
- Получение списка всех идей
- Ответ включает информацию о том, голосовал ли текущий пользователь

**POST /api/ideas/:id/vote**
- Голосование за идею
- Возвращает 409 Conflict при превышении лимита или повторном голосовании

### WebSocket события

**vote_update**
```typescript
{
  ideaId: number
  newVoteCount: number
}
```
Получение обновлений количества голосов в реальном времени от всех пользователей.

## Управление состоянием

Приложение использует стандартные React хуки:
- `useState` - локальное состояние компонентов
- `useEffect` - побочные эффекты (загрузка данных, подписки)
- `useCallback` - мемоизация функций

## Обработка ошибок

### Типы ошибок
- **Ошибки загрузки** - показываются через ErrorDisplay с возможностью повтора
- **Ошибки голосования** - временные уведомления (автоскрытие через 5 сек)
- **Ошибки сети** - обрабатываются на уровне API с понятными сообщениями
- **Критические ошибки** - перехватываются ErrorBoundary

## Индикаторы загрузки

- **Глобальная загрузка** - при первоначальной загрузке списка идей
- **Локальная загрузка** - на кнопке голосования (минимум 1 секунда для предотвращения мерцания)
- **Статус подключения** - индикатор состояния WebSocket соединения

